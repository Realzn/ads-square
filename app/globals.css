/* ─── ADS-SQUARE Global Styles ──────────────────────────────────────────── */
/* ⚡ OPTIMISATIONS LIGHTHOUSE :
   - Fallback fonts avec métriques ajustées → CLS minimal lors du swap
   - Animations composées uniquement sur les boutons nav → CLS = 0
   - Section "Polices auto-hébergées" à décommenter après download-fonts.sh
   ─────────────────────────────────────────────────────────────────────────── */


/* ══════════════════════════════════════════════════════════════════════════════
   OPTION A — CDN (actif par défaut)
   Polices chargées depuis Fontshare + Google Fonts via les <link> dans layout.js.
   font-display: swap actif via paramètre URL.
   Fallbacks dimensionnés ci-dessous réduisent le CLS lors du swap.
   ══════════════════════════════════════════════════════════════════════════════

   OPTION B — AUTO-HÉBERGEMENT (recommandé pour CLS = 0)
   Après avoir exécuté `bash scripts/download-fonts.sh` :
   1. Décommenter la section "Polices auto-hébergées" ci-dessous
   2. Supprimer les <link> polices dans app/layout.js
   3. Redéployer → CLS garanti à 0 avec font-display: optional
   ══════════════════════════════════════════════════════════════════════════════
*/


/* ── Fallback fonts dimensionnés (CLS minimal avec option A) ───────────────
   Ces @font-face ajustent les métriques des polices système pour qu'elles
   correspondent quasi-exactement à Clash Display et DM Sans.
   → Quand la web font charge (swap), le texte bouge à peine.
   ─────────────────────────────────────────────────────────────────────────── */

@font-face {
  font-family: 'Clash Display Fallback';
  src: local('Arial Bold'), local('Helvetica Bold');
  font-weight: 700 900;
  ascent-override: 105%;
  descent-override: 22%;
  line-gap-override: 0%;
  size-adjust: 97%;
}

@font-face {
  font-family: 'DM Sans Fallback';
  src: local('Arial'), local('Helvetica'), local('Helvetica Neue');
  font-weight: 400 800;
  ascent-override: 93%;
  descent-override: 24%;
  line-gap-override: 0%;
  size-adjust: 104%;
}


/* ══════════════════════════════════════════════════════════════════════════════
   OPTION B — POLICES AUTO-HÉBERGÉES (décommenter après download-fonts.sh)
   ══════════════════════════════════════════════════════════════════════════════

@font-face {
  font-family: 'Clash Display';
  src: url('/fonts/ClashDisplay-Bold.woff2') format('woff2');
  font-weight: 700 900;
  font-display: optional;
  font-style: normal;
}

@font-face {
  font-family: 'DM Sans';
  src: url('/fonts/DMSans-Regular.woff2') format('woff2');
  font-weight: 400;
  font-display: optional;
  font-style: normal;
}

@font-face {
  font-family: 'DM Sans';
  src: url('/fonts/DMSans-Medium.woff2') format('woff2');
  font-weight: 500;
  font-display: optional;
  font-style: normal;
}

@font-face {
  font-family: 'DM Sans';
  src: url('/fonts/DMSans-Bold.woff2') format('woff2');
  font-weight: 700 800;
  font-display: optional;
  font-style: normal;
}

  ══════════════════════════════════════════════════════════════════════════════ */


/* ── Reset & Base ────────────────────────────────────────────────────────── */

*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  scrollbar-color: rgba(255,255,255,0.12) transparent;
  scrollbar-width: thin;
}

body {
  background: #020609;
  color: #f0f0f0;
  /* Pile de polices : web font → fallback dimensionné → générique */
  font-family:
    'DM Sans',
    'DM Sans Fallback',
    'Inter',
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}


/* ── Animations réutilisables ────────────────────────────────────────────── */

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes pulse {
  0%, 100% { opacity: 0.4; }
  50%       { opacity: 1; }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes blockGlow {
  0%, 100% { opacity: 0.6; }
  50%       { opacity: 1; }
}


/* ── CORRECTIF CLS — Animations composées sur les boutons nav ────────────────
   Problème Lighthouse : les boutons nav (◈ ⊞ EN) utilisaient des animations
   sur padding-left, font-size, padding-right, margin-left, letter-spacing.
   Ces propriétés déclenchent layout + paint = CLS + janking.
   Fix : uniquement transform + opacity (propriétés composées, GPU).
   ─────────────────────────────────────────────────────────────────────────── */

nav button,
header button {
  /* Transition sur propriétés composées UNIQUEMENT */
  transition:
    opacity     0.15s ease,
    transform   0.15s ease,
    background  0.15s ease !important;
  will-change: transform, opacity;
  /* Taille fixe pour éviter tout recalcul au hover */
  transform-origin: center;
}

nav button:hover,
header button:hover {
  opacity: 0.85;
  transform: scale(1.04);
}

nav button:active,
header button:active {
  transform: scale(0.96);
  opacity: 0.7;
}


/* ── Accessibilité — Focus visible ──────────────────────────────────────── */

:focus-visible {
  outline: 2px solid rgba(240, 180, 41, 0.8);
  outline-offset: 2px;
  border-radius: 4px;
}


/* ── Scrollbar webkit ────────────────────────────────────────────────────── */

::-webkit-scrollbar        { width: 6px; height: 6px; }
::-webkit-scrollbar-track  { background: transparent; }
::-webkit-scrollbar-thumb  { background: rgba(255,255,255,0.12); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }


/* ── Correctif contraste accessibilité (score Lighthouse 93 → 97) ────────
   Éléments identifiés comme insuffisants : boutons nav, badge bêta, spans muted.
   Lighthouse exige ratio ≥ 4.5:1 pour le texte normal.
   ─────────────────────────────────────────────────────────────────────────── */

/* Badge "BÊTA" / bannière annonce — texte plus lisible */
[data-badge="beta"],
.beta-badge {
  /* Assurer ratio ≥ 4.5:1 sur fond #0f0f0f */
  color: rgba(255, 255, 255, 0.72) !important; /* ratio ~6.8:1 sur #0f0f0f */
}

/* Bouton langue "EN" et boutons nav discrets — améliorer contraste */
nav button[data-nav-secondary] {
  color: rgba(255, 255, 255, 0.68) !important;
}
